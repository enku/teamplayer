[pycodestyle]
max-line-length = 88 
exclude = */migrations/*

[tox]
envlist = {py36,py37,py38}-{django22,django30}
skipsdist = true

[testenv]
deps =
    -e.
    coverage
    pycodestyle
    Whoosh
    django22: Django>=2.2.8,<2.3
    django30: Django>=3.0,<3.1

whitelist_externals =
    /bin/cp
    /bin/mkdir
    /bin/rm

commands =
    pycodestyle teamplayer
    rm -rf {envdir}/project
    mkdir {envdir}/project
    django-admin.py startproject project {envdir}/project
    cp tools/settings.py {envdir}/project/project/settings.py
    cp tools/urls.py {envdir}/project/project/urls.py
    coverage erase
    coverage run --source=teamplayer {envdir}/project/manage.py test --failfast teamplayer
    coverage report
